# chess_game_test.py 使用说明

## 🎯 问题修复

### 修复的问题：
1. ✅ **缺少程序入口点** - 添加了 `if __name__ == "__main__":` 代码块
2. ✅ **端口配置正确** - BASE_URL 设置为 `http://127.0.0.1:8000`（与app.py一致）

### 修复前的问题：
- ❌ 程序启动后立即退出，没有任何提示
- ❌ 没有调用 `play_interactive_game()` 函数

### 修复后的效果：
- ✅ 程序正常启动，显示欢迎信息
- ✅ 提示用户输入用户名和密码
- ✅ 程序异常处理，Ctrl+C 安全退出

---

## 🚀 如何使用

### 1. 确保后端服务运行
```bash
# 在项目根目录启动后端
python app.py
```
后端会在 http://127.0.0.1:8000 启动

### 2. 运行测试客户端
```bash
# 在另一个命令行窗口运行
python chess_game_test.py
```

### 3. 操作流程
1. **输入用户名和密码**
   - 如果账户不存在，程序会询问是否注册新用户
   
2. **选择功能**（主菜单）：
   - `1` - 普通对弈（无分析，专注游戏体验）
   - `2` - 查看个人资料
   - `3` - 查看历史对局
   - `4` - 查看排行榜
   - `5` - 测试预定义教学课程
   - `6` - **教学模式对局**（💡每步AI分析）
   - `7` - 简化分析测试
   - `8` - 退出

### 4. 推荐测试流程
1. 选择 `6` 进入教学模式
2. 输入标准走法，如：`e2e4`, `g1f3`, `f1c4` 等
3. 观察每步的AI分析结果

---

## 🔧 故障排除

### 如果程序仍然异常退出：

1. **检查依赖包**
```bash
pip install requests
```

2. **检查后端服务**
```bash
# 确保后端正在运行
curl http://127.0.0.1:8000/api/health
```

3. **检查网络连接**
- 确保没有防火墙阻挡
- 确保端口8000未被占用

4. **查看错误信息**
- 程序现在有异常处理，会显示具体错误信息

---

## 📝 测试建议

### 教学模式测试走法：
```
e2e4    # 国王兵开局
g1f3    # 发展骑士
f1c4    # 发展主教
d2d3    # 巩固中心
```

### 预期结果：
- 每步都应该获得详细的AI分析
- 包括走法评级、优缺点、改进建议
- AI会给出应对走法并解释原因

---

## ✅ 确认修复成功

如果看到以下输出，说明修复成功：
```
🎯 国际象棋测试客户端启动
==================================================
请输入用户名:
```

如果程序立即退出或没有提示，请检查：
1. Python环境是否正确
2. 是否在正确的目录运行
3. 文件是否保存了最新的修改
